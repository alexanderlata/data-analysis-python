# Визуализация

## Задача 1. Датасет sleep75

Загрузите датасет `sleep75`.

### Базовые графики

1. Нарисуйте гистограммы для переменных `sleep`, `totwrk`, `age`, `hrwage`, `educ`
2. Нарисуйте гистограмму с накоплением для `sleep` относительно `male`
3. Нарисуйте гистограмму с накоплением для `totwrk` относительно `south`
4. Нарисуйте гистограмму с накоплением для `totwrk` относительно `smsa`
5. Нарисуйте диаграмму рассеяния `sleep` vs `totwrk`
6. Нарисуйте диаграмму рассеяния `sleep` vs `totwrk` с группировкой по `male`
7. Нарисуйте диаграмму рассеяния `sleep` vs `age`
8. Нарисуйте диаграмму рассеяния `sleep` vs `age` с группировкой по `south`
9. Нарисуйте диаграмму рассеяния `sleep` vs `edu`
10. Нарисуйте диаграмму рассеяния `sleep` vs `edu` с группировкой по `smsa`
11. Визуализируйте корреляционную матрицу для следующих переменных: `sleep`, `totwrk`, `age`

### Настройка графиков

12. Постройте гистограмму для переменной `sleep` со следующими настройками:
    - установите количество bins = 30
    - установите цвет столбцов на синий
    - добавьте заголовок "Распределение времени сна"
    - подпишите оси (X: "Часы сна", Y: "Частота")
    - добавьте сетку (grid)

13. Постройте диаграмму рассеяния `sleep` vs `totwrk` со следующими настройками:
    - установите размер точек 50
    - установите прозрачность (alpha) 0.6
    - установите цвет точек на зеленый
    - добавьте заголовок "Зависимость сна от рабочего времени"
    - подпишите оси
    - добавьте линию тренда

14. Постройте гистограммы для переменных `sleep`, `totwrk`, `age` на одном рисунке (subplot с 1 строкой и 3 столбцами)

15. Постройте гистограммы для переменных `sleep`, `totwrk`, `age` на отдельных рисунках (3 независимых графика)

### Коробчатые диаграммы

16. Нарисуйте коробчатую диаграмму для переменной `sleep`
17. Нарисуйте коробчатую диаграмму для переменной `sleep` с группировкой по `male`
18. Нарисуйте коробчатую диаграмму для переменной `totwrk` с группировкой по `south`
19. Нарисуйте коробчатые диаграммы для переменных `sleep`, `totwrk`, `age` на одном рисунке (subplot)
20. Нарисуйте коробчатую диаграмму для `hrwage` с группировкой по `educ` (если значений `educ` много, сгруппируйте их)

### Столбчатые диаграммы

21. Постройте столбчатую диаграмму среднего значения `sleep` по группам `male`
22. Постройте столбчатую диаграмму среднего значения `totwrk` по группам `south`
23. Постройте горизонтальную столбчатую диаграмму среднего значения `hrwage` по группам `educ`
24. Постройте сгруппированную столбчатую диаграмму среднего значения `sleep` и `totwrk` по группам `male`
25. Постройте столбчатую диаграмму с накоплением среднего значения `sleep` и `totwrk` по группам `south`

---

## Задача 2. Датасет Labour

Загрузите датасет `Labour`.

### Базовые графики

1. Нарисуйте гистограммы для переменных `output`, `capital`, `labour`, `wage`
2. Нарисуйте гистограммы для log-переменных `output`, `capital`, `labour`, `wage`
3. Нарисуйте диаграммы рассеяния `output` vs других переменных
4. Нарисуйте диаграммы рассеяния `log(output)` vs log других переменных
5. Визуализируйте корреляционную матрицу для всех переменных
6. Визуализируйте корреляционную матрицу для log-переменных

### Настройка графиков

7. Постройте гистограммы для всех переменных на одном рисунке (subplot 2×2)
8. Постройте гистограммы для log-переменных на одном рисунке (subplot 2×2)
9. Постройте диаграммы рассеяния `output` vs `capital`, `labour`, `wage` на одном рисунке (subplot 1×3)
10. Постройте корреляционную матрицу с аннотациями значений корреляции
11. Постройте корреляционную матрицу с пользовательской цветовой схемой (например, coolwarm или viridis)

### Коробчатые диаграммы

12. Нарисуйте коробчатые диаграммы для всех переменных на одном рисунке
13. Нарисуйте коробчатые диаграммы для log-переменных на одном рисунке
14. Постройте коробчатые диаграммы с отображением выбросов другим цветом
15. Постройте скрипичные диаграммы (violin plot) для переменных `output`, `capital`, `labour`

### Дополнительные графики

16. Постройте парные диаграммы рассеяния (pairplot) для всех переменных
17. Постройте парные диаграммы рассеяния для log-переменных
18. Постройте 3D диаграмму рассеяния `output` vs `capital` vs `labour` (используйте plotly)
19. Постройте линейную диаграмму для переменной `output` с сортировкой по индексу
20. Постройте регрессионные диаграммы `output` vs каждой переменной на одном рисунке (subplot)

---

## Задача 3. Датасет Electricity

Загрузите датасет `Electricity`.

### Базовые графики

1. Нарисуйте гистограммы для переменных `cost`, `q`, `pf`, `pk`, `pl`
2. Нарисуйте гистограммы для log-переменных `cost`, `q`, `pf`, `pk`, `pl`
3. Нарисуйте диаграммы рассеяния `cost` vs других переменных
4. Нарисуйте диаграммы рассеяния `log(cost)` vs log других переменных
5. Визуализируйте корреляционную матрицу для всех переменных
6. Визуализируйте корреляционную матрицу для log-переменных

### Настройка графиков

7. Постройте гистограммы для всех переменных на одном рисунке (subplot)
8. Постройте гистограммы для log-переменных на одном рисунке (subplot)
9. Постройте диаграммы рассеяния `cost` vs `q`, `pf`, `pk`, `pl` на одном рисунке (subplot 2×2)
10. Постройте корреляционную матрицу с треугольной маской (показать только нижний треугольник)
11. Постройте корреляционную матрицу с аннотациями и пользовательским размером шрифта

### Коробчатые диаграммы

12. Нарисуйте коробчатые диаграммы для всех переменных на одном рисунке
13. Нарисуйте коробчатые диаграммы для log-переменных на одном рисунке
14. Постройте горизонтальные коробчатые диаграммы для переменных `cost`, `q`, `pf`
15. Постройте коробчатые диаграммы с настройкой ширины "усов" (whis=1.5)

### Дополнительные графики

16. Постройте парные диаграммы рассеяния (pairplot) для всех переменных
17. Постройте парные диаграммы рассеяния для log-переменных
18. Постройте интерактивную диаграмму рассеяния `cost` vs `q` с hover информацией (plotly)
19. Постройте матрицу диаграмм рассеяния (scatter matrix) для всех переменных
20. Постройте диаграммы плотности (density plot) для переменных `cost` и `log(cost)`

---

## Задача 4. Датасет diamonds

Загрузите датасет `diamonds`.

### Базовые графики

1. Нарисуйте гистограммы для переменных `price`, `carat`
2. Нарисуйте гистограммы для log-переменных `price`, `carat`
3. Нарисуйте гистограмму с накоплением для `price` относительно `cut`
4. Нарисуйте гистограмму с накоплением для `carat` относительно `clarity`
5. Нарисуйте гистограмму с накоплением для `log(price)` относительно `color`
6. Нарисуйте гистограмму с накоплением для `log(carat)` относительно `color`
7. Нарисуйте диаграмму рассеяния `price` vs `carat`
8. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)`
9. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `cut`
10. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `color`
11. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `clarity`

### Настройка графиков

12. Постройте гистограмму для `price` со следующими настройками:
    - количество bins = 50
    - логарифмическая шкала по оси Y
    - добавьте линию медианы (vertical line)
    - настройте цветовую схему

13. Постройте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `cut`:
    - используйте различные маркеры для каждой группы
    - установите размер точек в зависимости от другой переменной
    - добавьте регрессионные линии для каждой группы
    - настройте легенду (позиция, размер шрифта)

14. Постройте гистограммы для `price` и `carat` на одном рисунке с общей легендой

### Коробчатые диаграммы

15. Нарисуйте коробчатую диаграмму для `price` с группировкой по `cut`
16. Нарисуйте коробчатую диаграмму для `log(price)` с группировкой по `color`
17. Нарисуйте коробчатую диаграмму для `carat` с группировкой по `clarity`
18. Постройте коробчатые диаграммы для `price` по всем категориальным переменным на одном рисунке (subplot)

### Столбчатые диаграммы

19. Постройте столбчатую диаграмму среднего значения `price` по группам `cut`
20. Постройте столбчатую диаграмму количества наблюдений по группам `cut`
21. Постройте сгруппированную столбчатую диаграмму среднего значения `price` по `cut` и `color`
22. Постройте столбчатую диаграмму с накоплением количества наблюдений по `cut` с разбивкой по `color`
23. Постройте горизонтальную столбчатую диаграмму медианы `price` по группам `clarity` с сортировкой


---

## Задача 5. Датасет Diamond

Загрузите датасет `Diamond`.

### Базовые графики

1. Нарисуйте гистограммы для переменных `price`, `carat`
2. Нарисуйте гистограммы для log-переменных `price`, `carat`
3. Нарисуйте гистограмму с накоплением для `price` относительно `certification`
4. Нарисуйте гистограмму с накоплением для `carat` относительно `clarity`
5. Нарисуйте гистограмму с накоплением для `log(price)` относительно `colour`
6. Нарисуйте гистограмму с накоплением для `log(carat)` относительно `colour`
7. Нарисуйте диаграмму рассеяния `price` vs `carat`
8. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)`
9. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `certification`
10. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `colour`
11. Нарисуйте диаграмму рассеяния `log(price)` vs `log(carat)` с группировкой по `clarity`

### Настройка графиков

12. Постройте гистограмму для `price` с настройкой:
    - KDE (kernel density estimate) поверх гистограммы
    - статистика в заголовке (среднее, медиана, стандартное отклонение)
    - вертикальные линии для среднего и медианы разными цветами

13. Постройте диаграмму рассеяния с регрессией `log(price)` vs `log(carat)`:
    - доверительный интервал для регрессии
    - остатки регрессии на отдельном графике
    - метрики качества регрессии (R², RMSE) в заголовке

14. Постройте subplot с 4 различными типами графиков для анализа `price`

### Коробчатые диаграммы

15. Нарисуйте коробчатую диаграмму для `price` с группировкой по `certification`
16. Нарисуйте коробчатую диаграмму для `log(price)` с группировкой по `colour`
17. Нарисуйте коробчатую диаграмму для `carat` с группировкой по `clarity`
18. Постройте комбинированный график: коробчатая диаграмма + swarm plot для `price` по `certification`
19. Постройте скрипичную диаграмму с разделением (split violin) для `price` по двум категориям

### Столбчатые диаграммы

20. Постройте столбчатую диаграмму среднего и медианного значения `price` по группам `certification`


---

## Общие рекомендации по настройке графиков

### Основные параметры

- **Размер фигуры**: `figsize=(width, height)` или `fig.update_layout(width=..., height=...)`
- **Заголовок**: `title`, `fontsize`, `fontweight`
- **Подписи осей**: `xlabel`, `ylabel`, `fontsize`
- **Пределы осей**: `xlim`, `ylim` или `set_xlim()`, `set_ylim()`
- **Масштаб осей**: `xscale`, `yscale` (linear, log, symlog, logit)
- **Сетка**: `grid=True`, `grid(alpha=...)`, `grid(which='major'/'minor'/'both')`
- **Легенда**: `legend()`, `loc`, `fontsize`, `frameon`, `title`

### Цвета и стили

- **Цветовые схемы**: viridis, plasma, coolwarm, RdYlBu, Set1, Set2, tab10
- **Палитры seaborn**: deep, muted, bright, pastel, dark, colorblind
- **Прозрачность**: `alpha` (0.0 - 1.0)
- **Стиль линии**: `-`, `--`, `-.`, `:`
- **Маркеры**: `o`, `s`, `^`, `*`, `+`, `x`, `D`
- **Толщина линии**: `linewidth` или `lw`

### Множественные графики

- **Subplot**: `plt.subplot(rows, cols, index)` или `fig, axes = plt.subplots(rows, cols)`
- **FacetGrid**: `sns.FacetGrid(data, row=..., col=..., hue=...)`
- **PairGrid**: `sns.PairGrid(data)`
- **Общий заголовок**: `fig.suptitle()`
- **Настройка расстояний**: `plt.tight_layout()` или `plt.subplots_adjust()`

### Статистические элементы

- **Линия тренда**: `sns.regplot()`, `sns.lmplot()`
- **Доверительный интервал**: `ci=95` в seaborn
- **Среднее/медиана**: вертикальные/горизонтальные линии `axvline()`, `axhline()`
- **KDE**: `kde=True` в гистограммах
- **Аннотации**: `plt.annotate()`, `annot=True` в heatmap


**Настройка параметров boxplot:**
```python
# matplotlib
plt.boxplot(data, 
            notch=True,          # вырезы для медианы
            showmeans=True,      # показать среднее
            showfliers=True,     # показать выбросы
            whis=1.5,           # множитель для усов
            patch_artist=True)   # закрашенные боксы

# seaborn
sns.boxplot(data=df, x='cat', y='val',
           whis=1.5,            # множитель для усов
           fliersize=5,         # размер выбросов
           linewidth=2,         # толщина линий
           notch=True)          # вырезы
```

### Сохранение графиков

```python
# Matplotlib/Seaborn
plt.savefig('filename.png', dpi=300, bbox_inches='tight')

# Plotly
fig.write_html('filename.html')
fig.write_image('filename.png')
```

### Темы и стили

```python
# Seaborn стили
sns.set_style('darkgrid')  # white, dark, whitegrid, darkgrid, ticks
sns.set_context('notebook')  # paper, notebook, talk, poster
sns.set_palette('Set2')

# Matplotlib стили
plt.style.use('seaborn-v0_8')
plt.style.use('ggplot')
```